# Emotions Guide Site

## –û–ø–∏—Å–∞–Ω–∏–µ

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–µ—Å—Ç–∞ –°–ê–ù (–°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ, –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ). –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ç–µ—Å—Ç, –ø–æ–ª—É—á–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **backend/**: FastAPI —Å–µ—Ä–≤–µ—Ä —Å Firebase –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ Realtime Database.
  - **services/**: –õ–æ–≥–∏–∫–∞ —Ç–µ—Å—Ç–∞ –°–ê–ù –≤ `SAN_test_service.py` –∏ `auth_service.py`.
  - **models.py**: Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è API.
  - **main.py**: FastAPI routes.
- **.venv**: –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python.
- **requirements.txt**: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (fastapi, uvicorn, firebase-admin, pydantic).
- **api_specification.json**: OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è.

## –ó–∞–ø—É—Å–∫ backend

1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   ```
   source .venv/bin/activate  # Linux/Mac
   .venv\Scripts\activate     # Windows
   ```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```
   pip install -r requirements.txt
   ```
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Firebase: –¥–æ–±–∞–≤—å—Ç–µ `creds.json` –≤ backend/ (—Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç).
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
   ```
   uvicorn backend.main:app --reload --host 0.0.0.0 --port 8000
   ```
5. API docs: http://localhost:8000/docs

## API –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`.

- **POST /api/auth/register**  
  –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.  
  **–ó–∞–ø—Ä–æ—Å:**

  ```json
  {
    "email": "user@example.com",
    "password": "password123",
    "username": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "termsAccepted": true
  }
  ```

  **–û—Ç–≤–µ—Ç (200):**

  ```json
  {
    "userId": "user123",
    "email": "user@example.com",
    "username": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
  ```

  **–û—à–∏–±–∫–∏:** 400 (–≤–∞–ª–∏–¥–∞—Ü–∏—è), 409 (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç).

- **POST /api/auth/login**  
  –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É.  
  **–ó–∞–ø—Ä–æ—Å:**

  ```json
  {
    "email": "user@example.com",
    "password": "password123"
  }
  ```

  **–û—Ç–≤–µ—Ç (200):** –ê–Ω–∞–ª–æ–≥–∏—á–µ–Ω register.  
  **–û—à–∏–±–∫–∏:** 400 (–Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), 401 (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è).

- **POST /api/auth/refresh**  
  –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞.  
  **–ó–∞–ø—Ä–æ—Å:**

  ```json
  {
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
  ```

  **–û—Ç–≤–µ—Ç (200):** –ù–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã.  
  **–û—à–∏–±–∫–∏:** 400 (–Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω), 401.

- **POST /api/auth/logout**  
  –í—ã—Ö–æ–¥ —Å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π refresh —Ç–æ–∫–µ–Ω–∞.  
  **–ó–∞–ø—Ä–æ—Å:**
  ```json
  {
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
  ```
  **–û—Ç–≤–µ—Ç (200):**
  ```json
  {
    "message": "–£—Å–ø–µ—à–Ω—ã–π –≤—ã—Ö–æ–¥"
  }
  ```
  **–û—à–∏–±–∫–∏:** 400, 401.

### –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- **GET /api/users/profile**  
  –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (auth required).  
  **–û—Ç–≤–µ—Ç (200):**

  ```json
  {
    "userId": "user123",
    "email": "user@example.com",
    "username": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "createdAt": "2024-01-01T00:00:00Z",
    "updatedAt": "2024-01-02T00:00:00Z"
  }
  ```

- **PUT /api/users/profile**  
  –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏.  
  **–ó–∞–ø—Ä–æ—Å:**

  ```json
  {
    "username": "–ù–æ–≤–æ–µ –ò–º—è"
  }
  ```

  **–û—Ç–≤–µ—Ç (200):** –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å.

- **PUT /api/users/change-email**  
  –°–º–µ–Ω–∞ email (auth required).  
  **–ó–∞–ø—Ä–æ—Å:**

  ```json
  {
    "newEmail": "new@example.com",
    "password": "currentpassword123"
  }
  ```

  **–û—Ç–≤–µ—Ç (200):** –£—Å–ø–µ—Ö.  
  **–û—à–∏–±–∫–∏:** 400, 401, 409.

- **PUT /api/users/change-password**  
  –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è.  
  **–ó–∞–ø—Ä–æ—Å:**
  ```json
  {
    "currentPassword": "current123",
    "newPassword": "newpassword123"
  }
  ```
  **–û—Ç–≤–µ—Ç (200):** –£—Å–ø–µ—Ö.

### –¢–µ—Å—Ç –°–ê–ù (–°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ, –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ)

–¢–µ—Å—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 30 –≤–æ–ø—Ä–æ—Å–æ–≤ (–ø–æ 10 –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é). –û—Ç–≤–µ—Ç—ã –æ—Ç 1 –¥–æ 7. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Firebase Realtime DB.

- **GET /api/san/questions**  
  –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ (auth required).  
  **–û—Ç–≤–µ—Ç (200):** –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤:

  ```json
  [
    {
      "positive_pole": "–°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ —Ö–æ—Ä–æ—à–µ–µ",
      "negative_pole": "–°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ –ø–ª–æ—Ö–æ–µ",
      "score": 0
    }
    // ... 29 more
  ]
  ```

- **POST /api/san/process**  
  –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ (auth required, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç).  
  **–ó–∞–ø—Ä–æ—Å:**

  ```json
  {
    "answers": [
      4, 5, 3, 6, 2, 7, 1, 4, 5, 3, 6, 2, 7, 1, 4, 5, 3, 6, 2, 7, 1, 4, 5, 3, 6,
      2, 7, 1, 4, 5
    ]
  }
  ```

  **–û—Ç–≤–µ—Ç (200):**

  ```json
  {
    "wellbeing": 4.2,
    "activity": 5.1,
    "mood": 3.8,
    "timestamp": 1726723200000,
    "interpretation": "–•–æ—Ä–æ—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ! üåü\n–í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à–æ –∏ —ç–Ω–µ—Ä–≥–∏—á–Ω–æ.\n\n–î–µ—Ç–∞–ª–∏:\n- –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ, –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è.\n\n–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è: –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ üí°\n\n–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: üìã\n- –í–∫–ª—é—á–∏ –ª—é–±–∏–º—É—é –º—É–∑—ã–∫—É –Ω–∞ 10 –º–∏–Ω—É—Ç üé∂\n  ‚Üí –°—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç –≤—ã—Ä–∞–±–æ—Ç–∫—É –¥–æ—Ñ–∞–º–∏–Ω–∞ –∏ —ç–Ω–¥–æ—Ä—Ñ–∏–Ω–æ–≤\n..."
  }
  ```

  **–û—à–∏–±–∫–∏:** 400 (–Ω–µ–≤–µ—Ä–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã), 401.

- **GET /api/test-results**?limit=5  
  –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (auth required).  
  **–û—Ç–≤–µ—Ç (200):** –ú–∞—Å—Å–∏–≤ TestResult.

- **POST /api/test-results**  
  –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä—è–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ process).  
  **–ó–∞–ø—Ä–æ—Å:**

  ```json
  {
    "wellbeingScore": 4,
    "activityScore": 5,
    "moodScore": 3,
    "timestamp": "2024-01-02T10:00:00Z"
  }
  ```

- **DELETE /api/test-results**  
  –°–±—Ä–æ—Å –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (auth required).

## –¢–µ—Å—Ç –°–ê–ù: –õ–æ–≥–∏–∫–∞

- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:** wellbeing (–≤–æ–ø—Ä–æ—Å—ã 1,2,7,8,13,14,19,20,25,26), activity (3,4,9,10,15,16,21,22,27,28), mood (5,6,11,12,17,18,23,24,29,30).
- **–†–∞—Å—á–µ—Ç:** –°—Ä–µ–¥–Ω–µ–µ –ø–æ 10 –æ—Ç–≤–µ—Ç–∞–º (1-7).
- **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:** Overall score = (wellbeing + activity + mood)/3.
  - > =5.5: –û—Ç–ª–∏—á–Ω–æ–µ ‚≠ê
  - > =4.5: –•–æ—Ä–æ—à–µ–µ üåü
  - > =3.5: –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ üå§
  - > =2.5: –ü–æ–Ω–∏–∂–µ–Ω–Ω–æ–µ üå•
  - <2.5: –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚õÖ  
    –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã: –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ <4.0. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –∏ –Ω–∏–∑–∫–∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π. –ö—Ä–∏–∑–∏—Å (–≤—Å–µ <=2): —Ç–µ–ª–µ—Ñ–æ–Ω –¥–æ–≤–µ—Ä–∏—è +7 (495) 400-99-99.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π: fastapi-codegen –∏–∑ api_specification.json.
- Firebase: –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç, –¥–æ–±–∞–≤—å—Ç–µ creds.json.
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /docs –¥–ª—è Swagger UI.
