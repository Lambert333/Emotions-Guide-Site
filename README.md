# Emotions Guide Site

## –û–ø–∏—Å–∞–Ω–∏–µ

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–µ—Å—Ç–∞ –°–ê–ù (–°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ, –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ). –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ç–µ—Å—Ç, –ø–æ–ª—É—á–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **backend/**: FastAPI —Å–µ—Ä–≤–µ—Ä —Å Firebase –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ Realtime Database.
  - **services/**: –õ–æ–≥–∏–∫–∞ —Ç–µ—Å—Ç–∞ –°–ê–ù –≤ `SAN_test_service.py` –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ `auth_service.py`.
  - **models.py**: Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è API.
  - **main.py**: FastAPI routes.
- **.venv**: –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python.
- **requirements.txt**: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (fastapi, uvicorn, firebase-admin, pydantic).

## –ó–∞–ø—É—Å–∫ backend

1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   ```
   source .venv/bin/activate  # Linux/Mac
   .venv\Scripts\activate     # Windows
   ```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```
   pip install -r requirements.txt
   ```
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Firebase: –¥–æ–±–∞–≤—å—Ç–µ `creds.json` –≤ backend/ (—Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç).
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
   ```
   uvicorn backend.main:app --reload --host 0.0.0.0 --port 8000
   ```
5. API docs: http://localhost:8000/docs

## API –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### –°–µ—Ä–≤–∏—Å –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Firebase Auth —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏. –í—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <access_token>`.

#### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (/api/auth/register, POST)

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞** (JSON):
  ```
  {
    "email": "user@example.com",
    "password": "password123",
    "username": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "termsAccepted": true
  }
  ```
- **–û—Ç–≤–µ—Ç (200)**:
  ```
  {
    "userId": "user123",
    "email": "user@example.com",
    "username": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
  ```
- **–û—à–∏–±–∫–∏**: 400 (–≤–∞–ª–∏–¥–∞—Ü–∏—è), 409 (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç).

#### 2. –í—Ö–æ–¥ (/api/auth/login, POST)

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
  ```
  {
    "email": "user@example.com",
    "password": "password123"
  }
  ```
- **–û—Ç–≤–µ—Ç (200)**: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (—Ç–æ–∫–µ–Ω—ã).
- **–û—à–∏–±–∫–∏**: 400 (–Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), 401 (–æ—à–∏–±–∫–∞ auth).

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (/api/auth/refresh, POST)

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π access_token –ø–æ refresh_token.
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
  ```
  {
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
  ```
- **–û—Ç–≤–µ—Ç (200)**: –ù–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã.
- **–û—à–∏–±–∫–∏**: 400 (–Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω), 401 (–æ—à–∏–±–∫–∞).

#### 4. –í—ã—Ö–æ–¥ (/api/auth/logout, POST)

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å refresh_token.
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
  ```
  {
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
  ```
- **–û—Ç–≤–µ—Ç (200)**:
  ```
  {
    "message": "–£—Å–ø–µ—à–Ω—ã–π –≤—ã—Ö–æ–¥"
  }
  ```
- **–û—à–∏–±–∫–∏**: 400 (–æ—à–∏–±–∫–∞ logout).

#### 5. –ü—Ä–æ—Ñ–∏–ª—å (/api/users/profile, GET/PUT)

- **GET**: –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å (auth required).
- **PUT**: –û–±–Ω–æ–≤–∏—Ç—å username.
  - –¢–µ–ª–æ: `{"username": "–ù–æ–≤–æ–µ –ò–º—è"}`
- **–û—Ç–≤–µ—Ç**: {userId, email, username, createdAt, updatedAt}.

#### 6. –°–º–µ–Ω–∞ email/–ø–∞—Ä–æ–ª—è (/api/users/change-email, /change-password, PUT)

- **change-email**: –¢–µ–ª–æ: {"newEmail": "...", "password": "..."}
- **change-password**: –¢–µ–ª–æ: {"currentPassword": "...", "newPassword": "..." (min 6)}
- **–û—Ç–≤–µ—Ç (200)**: {"message": "–£—Å–ø–µ—à–Ω–æ"}

### –¢–µ—Å—Ç –°–ê–ù

–¢–µ—Å—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 30 –≤–æ–ø—Ä–æ—Å–æ–≤ (–ø–æ 10 –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é: —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ). –û—Ç–≤–µ—Ç—ã –æ—Ç 1 –¥–æ 7. –ë–∞–ª–ª—ã - —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.

#### 1. –í–æ–ø—Ä–æ—Å—ã (/api/san/questions, GET)

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ (auth required).
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: limit (1-50, default 30).
- **–û—Ç–≤–µ—Ç (200)**: –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤:
  ```
  [
    {
      "positive_pole": "–°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ —Ö–æ—Ä–æ—à–µ–µ",
      "negative_pole": "–°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ –ø–ª–æ—Ö–æ–µ",
      "score": 0
    },
    ... (30 –≤–æ–ø—Ä–æ—Å–æ–≤)
  ]
  ```

#### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ (/api/san/process, POST)

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –±–∞–ª–ª—ã, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ DB (auth required).
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
  ```
  {
    "answers": [4, 5, 3, ..., 6]  // 30 –∑–Ω–∞—á–µ–Ω–∏–π (1-7)
  }
  ```
- **–û—Ç–≤–µ—Ç (200)**:
  ```
  {
    "wellbeing": 5.2,
    "activity": 4.8,
    "mood": 5.5,
    "timestamp": 1726723200000,
    "interpretation": "–•–æ—Ä–æ—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ! üåü\n–í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à–æ –∏ —ç–Ω–µ—Ä–≥–∏—á–Ω–æ.\n\n–î–µ—Ç–∞–ª–∏:\n- –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ, –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è.\n\n–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è: \n\n–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: üìã\n- –°–¥–µ–ª–∞–π 10-–º–∏–Ω—É—Ç–Ω—É—é –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—É—é –≥–∏–º–Ω–∞—Å—Ç–∏–∫—É üí®\n  ‚Üí –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —Ä–∞–±–æ—Ç—É –≤–µ–≥–µ—Ç–∞—Ç–∏–≤–Ω–æ–π –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã\n..."  // –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç
  }
  ```
- **–û—à–∏–±–∫–∏**: 400 (–Ω–µ–≤–µ—Ä–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, –Ω–µ 30 –∏–ª–∏ –≤–Ω–µ 1-7).

#### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ (/api/test-results)

- **GET**: –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (auth required).
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: limit (1-50, default 5).
  - –û—Ç–≤–µ—Ç: –ú–∞—Å—Å–∏–≤ {resultId, userId, activityScore, moodScore, wellbeingScore, timestamp}.
- **POST**: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ process).
  - –¢–µ–ª–æ: {"activityScore": 5, "moodScore": 6, "wellbeingScore": 4, "timestamp": "..."}
- **DELETE**: –°–±—Ä–æ—Å –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (auth required).
- **–û—Ç–≤–µ—Ç—ã**: SuccessResponse –∏–ª–∏ —Å–ø–∏—Å–æ–∫ TestResult.

## –¢–µ—Å—Ç –°–ê–ù: –î–µ—Ç–∞–ª–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏

- **–†–∞—Å—á–µ—Ç**: –°—Ä–µ–¥–Ω–∏–µ –±–∞–ª–ª—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (1-7).
- **Overall score**: (wellbeing + activity + mood) / 3.
- **–°—Ç–∞—Ç—É—Å—ã**:
  - ‚â•5.5: –û—Ç–ª–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ! ‚≠ê
  - ‚â•4.5: –•–æ—Ä–æ—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ! üåü
  - ‚â•3.5: –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ üå§
  - ‚â•2.5: –ü–æ–Ω–∏–∂–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ üå•
  - <2.5: –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚õÖ
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã**: –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ <4.0 (—Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ).
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π (–∫—Ä–∏–∑–∏—Å, –¥–∏—Å–±–∞–ª–∞–Ω—Å) + —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø–æ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º.
- **–ö—Ä–∏–∑–∏—Å**: –ï—Å–ª–∏ –≤—Å–µ ‚â§2.0, –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –¥–æ–≤–µ—Ä–∏—è +7 (495) 400-99-99.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

- –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π: fastapi-codegen –∏–∑ api_specification.json.
- Firebase: –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç, –¥–æ–±–∞–≤—å—Ç–µ creds.json.
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /docs –¥–ª—è Swagger UI.
